{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport useSWR from 'swr';\nconst API_BASE_URL = \"http://localhost:3002\";\nconst fetcher = async url => {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(\"Error with network response\");\n  }\n  return response.json();\n};\nconst patcher = async url => {\n  const response = await fetch(url, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userData)\n  });\n  if (!response.ok) {\n    throw new Error(\"Error with network response\");\n  }\n  return response.json();\n};\nexport function useUsers(currentPage, searchText = \"\") {\n  _s();\n  const usersUrl = `${API_BASE_URL}/users?search=${searchText}&page=${currentPage}`;\n  const {\n    data: usersData,\n    error: usersError,\n    isLoading: usersLoading\n  } = useSWR(usersUrl, fetcher);\n  const rolesUrl = `${API_BASE_URL}/roles`;\n  const {\n    data: rolesData,\n    error: rolesError,\n    isLoading: rolesLoading\n  } = useSWR(rolesUrl, fetcher);\n\n  // Combine users with their roles when both are available\n  const completeUsers = usersData && rolesData ? usersData.data.map(user => {\n    const role = rolesData.data.find(role => role.id === user.roleId);\n    return {\n      ...user,\n      role\n    };\n  }) : [];\n  const isLoading = usersLoading || rolesLoading;\n  const error = usersError || rolesError;\n  return {\n    data: usersData ? {\n      ...usersData,\n      completeUsers\n    } : null,\n    isLoading,\n    error\n  };\n}\n_s(useUsers, \"rAuTbSeN2mLI2IYsccnfzxfQdTs=\", false, function () {\n  return [useSWR, useSWR];\n});\nexport function useRoles() {\n  _s2();\n  const {\n    data,\n    isLoading,\n    error\n  } = useSWR(`${API_BASE_URL}/roles`, fetcher);\n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n_s2(useRoles, \"sS6/vKJCSTNynGfmwXrkbgPofUo=\", false, function () {\n  return [useSWR];\n});\nexport function useUserRole(roleId) {\n  _s3();\n  const {\n    data,\n    isLoading,\n    error\n  } = useSWR(roleId ? `${API_BASE_URL}/roles?id=${roleId}` : null, fetcher);\n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n_s3(useUserRole, \"sS6/vKJCSTNynGfmwXrkbgPofUo=\", false, function () {\n  return [useSWR];\n});\nexport function useEditUser(userId, userData) {\n  _s4();\n  const {\n    data,\n    isLoading,\n    error,\n    mutate\n  } = useSWR(`${API_BASE_URL}/user/${userId}`, patcher);\n  return {\n    data,\n    isLoading,\n    error,\n    mutate\n  };\n}\n_s4(useEditUser, \"/gn1ixcZ6MysLqsHUmWzFtT9GiQ=\", false, function () {\n  return [useSWR];\n});","map":{"version":3,"names":["useSWR","API_BASE_URL","fetcher","url","response","fetch","ok","Error","json","patcher","method","headers","body","JSON","stringify","userData","useUsers","currentPage","searchText","_s","usersUrl","data","usersData","error","usersError","isLoading","usersLoading","rolesUrl","rolesData","rolesError","rolesLoading","completeUsers","map","user","role","find","id","roleId","useRoles","_s2","useUserRole","_s3","useEditUser","userId","_s4","mutate"],"sources":["/Users/catiecook/Documents/workos/frontend-take-home/client/src/hooks/api.ts"],"sourcesContent":["import useSWR from 'swr';\nimport { Role } from \"../types/Role\";\nimport { User } from \"../types/User\";\n\nconst API_BASE_URL = \"http://localhost:3002\";\n\nconst fetcher = async (url: string) => {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(\"Error with network response\");\n  }\n  return response.json();\n};\n\nconst patcher = async (url: string) => {\n  const response = await fetch(url, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userData),\n    });\n\n\n  if (!response.ok) {\n    throw new Error(\"Error with network response\");\n  }\n  return response.json();\n};\n\n\n\nexport function useUsers(currentPage: number, searchText: string = \"\") {\n\n  const usersUrl = `${API_BASE_URL}/users?search=${searchText}&page=${currentPage}`;\n  const { data: usersData, error: usersError, isLoading: usersLoading } = useSWR(usersUrl, fetcher);\n\n  const rolesUrl = `${API_BASE_URL}/roles`;\n  const { data: rolesData, error: rolesError, isLoading: rolesLoading } = useSWR(rolesUrl, fetcher);\n\n  // Combine users with their roles when both are available\n  const completeUsers = usersData && rolesData \n    ? usersData.data.map((user: User) => {\n        const role = rolesData.data.find((role: Role) => role.id === user.roleId);\n        return { ...user, role };\n      })\n    : [];\n\n  const isLoading = usersLoading || rolesLoading;\n  const error = usersError || rolesError;\n\n  return {\n    data: usersData ? { ...usersData, completeUsers } : null,\n    isLoading,\n    error\n  };\n}\n\nexport function useRoles() {\n  const { data, isLoading, error, } = useSWR(`${API_BASE_URL}/roles`, fetcher);\n  \n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n\nexport function useUserRole(roleId: string) {\n  const { data, isLoading, error, } = useSWR(\n    roleId ? `${API_BASE_URL}/roles?id=${roleId}` : null,\n    fetcher\n  );\n  \n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n\n\nexport function useEditUser(userId: string, userData: User) {\n  const { data, isLoading, error, mutate } = useSWR(`${API_BASE_URL}/user/${userId}`, patcher);\n  \n  return {\n    data,\n    isLoading,\n    error,\n    mutate\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
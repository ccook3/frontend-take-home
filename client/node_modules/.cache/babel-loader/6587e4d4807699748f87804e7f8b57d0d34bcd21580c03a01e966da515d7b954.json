{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport useSWR from 'swr';\nexport const API_BASE_URL = 'http://localhost:3002';\nconst fetcher = async url => {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error('Error with network response');\n  }\n  return response.json();\n};\nexport function useUsers(currentPage, searchText = '') {\n  _s();\n  const usersUrl = `${API_BASE_URL}/users?search=${searchText}&page=${currentPage}`;\n  const {\n    data: usersData,\n    error: usersError,\n    isLoading: usersLoading,\n    mutate\n  } = useSWR(usersUrl, fetcher);\n  const rolesUrl = `${API_BASE_URL}/roles`;\n  const {\n    data: rolesData,\n    error: rolesError,\n    isLoading: rolesLoading\n  } = useSWR(rolesUrl, fetcher);\n\n  // Combine users with their roles when both are available\n  const completeUsers = usersData && rolesData ? usersData.data.map(user => {\n    const role = rolesData.data.find(role => role.id === user.roleId);\n    return {\n      ...user,\n      role\n    };\n  }) : [];\n  const isLoading = usersLoading || rolesLoading;\n  const error = usersError || rolesError;\n  return {\n    data: usersData ? {\n      ...usersData,\n      completeUsers\n    } : null,\n    isLoading,\n    error,\n    mutate\n  };\n}\n_s(useUsers, \"V8PGAreKwIPAGfok1gtMaDgek1U=\", false, function () {\n  return [useSWR, useSWR];\n});\nexport function useRoles(searchText = '') {\n  _s2();\n  const rolesUrl = `${API_BASE_URL}/roles${searchText ? `?search=${searchText}` : ''}`;\n  const {\n    data,\n    isLoading,\n    error\n  } = useSWR(rolesUrl, fetcher);\n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n_s2(useRoles, \"t/CNG0QHqQ97IXTJS79UsUByRzk=\", false, function () {\n  return [useSWR];\n});\nexport function useUserRole(roleId) {\n  _s3();\n  const {\n    data,\n    isLoading,\n    error\n  } = useSWR(roleId ? `${API_BASE_URL}/roles?id=${roleId}` : null, fetcher);\n  return {\n    data,\n    isLoading,\n    error\n  };\n}\n_s3(useUserRole, \"t/CNG0QHqQ97IXTJS79UsUByRzk=\", false, function () {\n  return [useSWR];\n});","map":{"version":3,"names":["useSWR","API_BASE_URL","fetcher","url","response","fetch","ok","Error","json","useUsers","currentPage","searchText","_s","usersUrl","data","usersData","error","usersError","isLoading","usersLoading","mutate","rolesUrl","rolesData","rolesError","rolesLoading","completeUsers","map","user","role","find","id","roleId","useRoles","_s2","useUserRole","_s3"],"sources":["/Users/catiecook/Documents/workos/frontend-take-home/client/src/services/api.ts"],"sourcesContent":["import useSWR from 'swr';\nimport { Role } from '../types/Role';\nimport { User } from '../types/User';\n\nexport const API_BASE_URL = 'http://localhost:3002';\n\nconst fetcher = async (url: string) => {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error('Error with network response');\n  }\n  return response.json();\n};\n\nexport function useUsers(currentPage: number, searchText: string = '') {\n  const usersUrl = `${API_BASE_URL}/users?search=${searchText}&page=${currentPage}`;\n  const {\n    data: usersData,\n    error: usersError,\n    isLoading: usersLoading,\n    mutate,\n  } = useSWR(usersUrl, fetcher);\n\n  const rolesUrl = `${API_BASE_URL}/roles`;\n  const {\n    data: rolesData,\n    error: rolesError,\n    isLoading: rolesLoading,\n  } = useSWR(rolesUrl, fetcher);\n\n  // Combine users with their roles when both are available\n  const completeUsers =\n    usersData && rolesData\n      ? usersData.data.map((user: User) => {\n          const role = rolesData.data.find(\n            (role: Role) => role.id === user.roleId\n          );\n          return { ...user, role };\n        })\n      : [];\n\n  const isLoading = usersLoading || rolesLoading;\n  const error = usersError || rolesError;\n\n  return {\n    data: usersData ? { ...usersData, completeUsers } : null,\n    isLoading,\n    error,\n    mutate,\n  };\n}\n\nexport function useRoles(searchText = '') {\n  const rolesUrl = `${API_BASE_URL}/roles${searchText ? `?search=${searchText}` : ''}`;\n  const { data, isLoading, error } = useSWR(rolesUrl, fetcher);\n\n  return {\n    data,\n    isLoading,\n    error,\n  };\n}\n\nexport function useUserRole(roleId: string) {\n  const { data, isLoading, error } = useSWR(\n    roleId ? `${API_BASE_URL}/roles?id=${roleId}` : null,\n    fetcher\n  );\n\n  return {\n    data,\n    isLoading,\n    error,\n  };\n}\n"],"mappings":";;;AAAA,OAAOA,MAAM,MAAM,KAAK;AAIxB,OAAO,MAAMC,YAAY,GAAG,uBAAuB;AAEnD,MAAMC,OAAO,GAAG,MAAOC,GAAW,IAAK;EACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;EACjC,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;EAChD;EACA,OAAOH,QAAQ,CAACI,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,OAAO,SAASC,QAAQA,CAACC,WAAmB,EAAEC,UAAkB,GAAG,EAAE,EAAE;EAAAC,EAAA;EACrE,MAAMC,QAAQ,GAAG,GAAGZ,YAAY,iBAAiBU,UAAU,SAASD,WAAW,EAAE;EACjF,MAAM;IACJI,IAAI,EAAEC,SAAS;IACfC,KAAK,EAAEC,UAAU;IACjBC,SAAS,EAAEC,YAAY;IACvBC;EACF,CAAC,GAAGpB,MAAM,CAACa,QAAQ,EAAEX,OAAO,CAAC;EAE7B,MAAMmB,QAAQ,GAAG,GAAGpB,YAAY,QAAQ;EACxC,MAAM;IACJa,IAAI,EAAEQ,SAAS;IACfN,KAAK,EAAEO,UAAU;IACjBL,SAAS,EAAEM;EACb,CAAC,GAAGxB,MAAM,CAACqB,QAAQ,EAAEnB,OAAO,CAAC;;EAE7B;EACA,MAAMuB,aAAa,GACjBV,SAAS,IAAIO,SAAS,GAClBP,SAAS,CAACD,IAAI,CAACY,GAAG,CAAEC,IAAU,IAAK;IACjC,MAAMC,IAAI,GAAGN,SAAS,CAACR,IAAI,CAACe,IAAI,CAC7BD,IAAU,IAAKA,IAAI,CAACE,EAAE,KAAKH,IAAI,CAACI,MACnC,CAAC;IACD,OAAO;MAAE,GAAGJ,IAAI;MAAEC;IAAK,CAAC;EAC1B,CAAC,CAAC,GACF,EAAE;EAER,MAAMV,SAAS,GAAGC,YAAY,IAAIK,YAAY;EAC9C,MAAMR,KAAK,GAAGC,UAAU,IAAIM,UAAU;EAEtC,OAAO;IACLT,IAAI,EAAEC,SAAS,GAAG;MAAE,GAAGA,SAAS;MAAEU;IAAc,CAAC,GAAG,IAAI;IACxDP,SAAS;IACTF,KAAK;IACLI;EACF,CAAC;AACH;AAACR,EAAA,CApCeH,QAAQ;EAAA,QAOlBT,MAAM,EAONA,MAAM;AAAA;AAwBZ,OAAO,SAASgC,QAAQA,CAACrB,UAAU,GAAG,EAAE,EAAE;EAAAsB,GAAA;EACxC,MAAMZ,QAAQ,GAAG,GAAGpB,YAAY,SAASU,UAAU,GAAG,WAAWA,UAAU,EAAE,GAAG,EAAE,EAAE;EACpF,MAAM;IAAEG,IAAI;IAAEI,SAAS;IAAEF;EAAM,CAAC,GAAGhB,MAAM,CAACqB,QAAQ,EAAEnB,OAAO,CAAC;EAE5D,OAAO;IACLY,IAAI;IACJI,SAAS;IACTF;EACF,CAAC;AACH;AAACiB,GAAA,CATeD,QAAQ;EAAA,QAEahC,MAAM;AAAA;AAS3C,OAAO,SAASkC,WAAWA,CAACH,MAAc,EAAE;EAAAI,GAAA;EAC1C,MAAM;IAAErB,IAAI;IAAEI,SAAS;IAAEF;EAAM,CAAC,GAAGhB,MAAM,CACvC+B,MAAM,GAAG,GAAG9B,YAAY,aAAa8B,MAAM,EAAE,GAAG,IAAI,EACpD7B,OACF,CAAC;EAED,OAAO;IACLY,IAAI;IACJI,SAAS;IACTF;EACF,CAAC;AACH;AAACmB,GAAA,CAXeD,WAAW;EAAA,QACUlC,MAAM;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}